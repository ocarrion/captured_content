<!DOCTYPE html>
<html>
  <head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/about.css" >
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/jquery.js"></script>
    <link rel="stylesheet" href="../css/layout.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  </head>

  <body id="categoryPage" style="background-color: #ffffff">
    <!-- Nav Bar // Search-bar container -->
    <div class = "navbar">
              <nav>
                <a href="/" class="title">Captured Content</a>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/category">Categories</a></li>
                    <li><a href="/blog">Blogs</a></li>
                </ul>              
    
               <div class="container">
                <form action="" class="search-bar" id="search">
                <input id="searchResult" type="text" placeholder="search for anything   .." name="a">
                <button type="submit"><img src="../images/search.png"></button> 
    
            </nav>
    </div>
  </body>


  <br>
  <br>
 <!-- Home Page Description -->

  <h3 class="desc">Welcome to Captured Content! <br>A place where you can find inspiration through images along with different categories that will open your mind to new concepts and visions</h3>
  <br>
  <br>


<!-- image Container -->

<div id="results"> 

  <div class="image-container" id="image-container"></div>

</div>


<!-- Script/Unsplash API-->


  <script src="../js/unsplash.js"></script>


  <script>

    $('#search').submit(function(e){

      e.preventDefault();

    const apiKey = '-OJdg0SYrZJhb6DWDfcEz2P7X98AfCIyuC5qvxEBFi4';

    var search = $('#searchResult').val();

    const url = `https://api.unsplash.com/search/photos/?query=${search}&client_id=${apiKey}&per_page=30`;

    $('#image-container').empty();
    console.log('cleared')



    $.ajax({
      method: 'GET',
      url: url,
      success: function(data){
        data.results.forEach(photo => {

          // console.log(photo.urls.regular)

          let pictureUrl = photo.urls.regular;

         let pictureLink = photo.links.html;


          $('#results').append(`<div class="image-container" id="image-container"></div>`)

        const item = document.createElement('a');
                setAttributes(item, {
                    href: photo.links.html,
                    target: '_blank',
          });



        const img = document.createElement('img');
          setAttributes(img, {
              src: pictureUrl,
          });

        item.appendChild(img);
        imageContainer.appendChild(item);


        });
      }
    })

    })
  </script>
</body>
</html>