<!DOCTYPE html>
<html>
  <head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/about.css" >
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/jquery.js"></script>
    <link rel="stylesheet" href="../css/layout.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  </head>


      <body style="background-color: #ffffff">
        <div class = "navbar">
            <nav>
                <h2 class="title">Captured Content</h2>
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="category.html">Categories</a></li>
                    <li><a href="#">Pinned</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
    
               <div class="container">
                <form action="" class="search-bar" id="search">
                <input id="searchResult" type="text" placeholder="search for anything   .." name="o">
                <button type="submit"><img src="../images/search.png"></button>
                
    
            </nav>
    </div>

    </body>


<!--        image Container -->


<div id="results"> 

  <div class="image-container" id="image-container"></div>

</div>



<!--        Scripts-->
  <script src="../js/unsplash.js"></script>


  <script>
    $('#search').submit(function(e){

      e.preventDefault();

    const apiKey = 'fyjG6ju9FL12nBLo0tntSbufZe-bPZtt9r0vN8Phh6Y';

    var search = $('#searchResult').val();

    const url = `https://api.unsplash.com/search/photos/?query=${search}&client_id=${apiKey}&count=10`;

    $('#image-container').empty();
    console.log('cleared')



    $.ajax({
      method: 'GET',
      url: url,
      success: function(data){
        data.results.forEach(photo => {
          // console.log(photo.urls.regular)

          let pictureUrl = photo.urls.regular;

         let pictureLink = photo.links.html;


          $('#results').append(`<div class="image-container" id="image-container"></div>`)

        const item = document.createElement('a');
                setAttributes(item, {
                    href: photo.links.html,
                    target: '_blank',
          });


        const img = document.createElement('img');
          setAttributes(img, {
              src: pictureUrl,
          });

        item.appendChild(img);
        imageContainer.appendChild(item);


        });
      }
    })

    })
  </script>
</body>
</html>